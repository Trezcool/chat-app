<!DOCTYPE html>
{% load staticfiles %}
<html lang="en" ng-app="chat" class="init-loader">
<head>
    <base href="/">
    <meta charset="UTF-8">
    <meta name="fragment" content="!">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <link rel="icon" href="{% static 'img/favicon.ico' %}" type="image/ico">
    <link rel="stylesheet" href="{% static 'bower_components/bootstrap/dist/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'bower_components/font-awesome/css/font-awesome.min.css' %}">

{#    <link href='//fonts.googleapis.com/css?family=Raleway:400,300,600,200' rel='stylesheet' type='text/css'>#}
{#    <link rel="stylesheet" href="{% static 'normalize.css' %}">#}
{#    <link rel="stylesheet" href="{% static 'skeleton.css' %}">#}
{#    <link rel="stylesheet" href="{% static 'chat.css' %}">#}

    <title>{% block title %}coolChat{% endblock %}</title>
    <style type="text/css">
        /* Page initialisation loader styling */
        html {
            transition: background-color 1s;
            -webkit-transition: background-color 1s;
        }
        body {
            transition: opacity 1s ease-in;
            -webkit-transition: opacity 1s ease-in;
        }
        html.init-loader {
            background: #fff;
            -webkit-transition: background-color;
            transition: background-color;
            height: 100%; overflow: hidden;
        }
        html.init-loader:before {
            content: '';
            font-size: 10px;
            margin: -130px 0 0 -50px;
            text-indent: -9999em;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: url(static/img/loader.png) no-repeat center;
            position: absolute;
            top: 50%;
            left: 50%;
            -webkit-animation: loader-rotation 1.4s infinite linear;
            animation: loader-rotation 1.4s infinite linear;
            overflow: hidden;
        }
        html.init-loader:after {
            content: 'Loading';
            display: block;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 26px;
            color: #333 ;
            text-transform: uppercase;
            letter-spacing: 3px;
        }
        html.init-loader body {
            opacity: 0;
        }
    </style>
    <script type="text/javascript">
        // Page initialisation loader js
        var html = document.getElementsByTagName('html')[0];
        window.onload = function(){
            html.className = html.className.replace(/init-loader/, '');
        }
    </script>

{#    <script type="text/javascript" src='{% static "jquery-1.12.1.min.js" %}'></script>#}
{#    <script type="text/javascript" src='{% static "reconnecting-websocket.min.js" %}'></script>#}
{#    <script type="text/javascript" src='{% static "chat.js" %}'></script>#}

    <!-- Chat session script -->
{#    <script type="text/javascript">#}
{#        $(function() { new ChatSession('{{ request.user.username }}') })#}
{#    </script>#}
</head>
<body ng-controller="AppCtrl" ng-cloak>
    <header>
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mainNav" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" ng-href="/"  data-toggle="collapse" data-target=".navbar-collapse.in">
                        <img class="logo-sm" src="{% static 'img/logo-sticky-header.png' %}" alt="coolChat">
                        <img class="logo-lg" src="{% static 'img/logo-header.png' %}" alt="coolChat">
                    </a>
                </div>
                <div class="collapse navbar-collapse" id="mainNav">
                    {% include '_includes/_topnav.html' %}
                </div>
            </div>
        </nav>
    </header>
    <div ng-show="loading" class="app-loading">
        <div class="loader">Loading...</div>
    </div>
    <div id="content">
        {% verbatim %}
            <div class="hide" ng-class="{'show': user.authenticated || !user.authenticated}">  <!-- FIXME: Really ?? -->
                <uib-alert ng-repeat="alert in alerts" type="{{ alert.type }}" close="closeAlert($index)" dismiss-on-timeout="8000">
                    {{ alert.msg }}
                    <i class="fa fa-{{alert.icon}}"></i>
                </uib-alert>
            </div>
        {% endverbatim %}
        <div ng-view autoscroll ng-hide="loading">
            <!-- ng content views loaded here -->
        </div>
    </div>

    <footer id="footer">
        <div class="container-fluid padding-v w960">
            <div class="row">
                <div class="col-sm-3">
                    <ul class="footer-nav">
                        <li><a ng-href="/about">About us</a></li>
                        <li><a ng-href="/faq">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-sm-3">
                    <ul class="footer-nav">
                        <li ng-if="!user.authenticated"><a ng-href="/login">Log in</a></li>
                        <li ng-if="!user.authenticated"><a ng-href="/hotel-zone/register/step-1">Sign up</a></li>
                        <li><a ng-href="/contact-us">Contact us</a></li>
                        <li><a ng-href="/terms-and-conditions">Terms &amp; Conditions</a></li>
                    </ul>
                </div>
                <div class="col-sm-3 desktop-only">
                    <p class="caps">coolChat</p>
                    <p>
                        9th Floor<br>
                        Indigo Tower<br>
                        Jumeirah Lake Towers
                        PO Box 9550<br>
                        Dubai UAE
                    </p>
                </div>
                <div class="col-sm-3">
                    <div class="footer-social">
                        <p class="caps">Connect with us</p>
                        <a href="" class="icon round md wht"><i class="fa fa-facebook"></i></a>
                        <a href="" class="icon round md wht"><i class="fa fa-twitter"></i></a>
                        <a href="" class="icon round md wht"><i class="fa fa-google-plus"></i></a>
                    </div>
                </div>
            </div>
            <span class="small">Copyright&copy;2016 coolChat</span>
        </div>
    </footer>

    <!-- JS -->
    {% block body_js %}
        <script src="{% static 'bower_components/underscore/underscore-min.js' %}"></script>
        <script src="{% static 'bower_components/jquery/dist/jquery.min.js' %}"></script>
        <script src="{% static 'bower_components/moment/min/moment.min.js' %}"></script>
        <script src="{% static 'bower_components/bootstrap/dist/js/bootstrap.min.js' %}"></script>
        <script src="{% static 'bower_components/angular/angular.min.js' %}"></script>
        <script src="{% static 'bower_components/angular-animate/angular-animate.min.js' %}"></script>
        <script src="{% static 'bower_components/angular-resource/angular-resource.min.js' %}"></script>
        <script src="{% static 'bower_components/angular-route/angular-route.min.js' %}"></script>
        <script src="{% static 'bower_components/angular-cookies/angular-cookies.min.js' %}"></script>
        <script src="{% static 'bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js' %}"></script>
        <script src="{% static 'bower_components/angular-bootstrap-show-errors/src/showErrors.min.js' %}"></script>
        <script src="{% static 'bower_components/ng-file-upload/ng-file-upload-shim.min.js' %}"></script>
        <script src="{% static 'bower_components/ng-file-upload/ng-file-upload.min.js' %}"></script>
        <script src="{% static 'bower_components/intl-tel-input/build/js/intlTelInput.min.js' %}"></script>
        <script src="{% static 'bower_components/intl-tel-input/lib/libphonenumber/build/utils.js' %}"></script>
        <script src="{% static 'bower_components/ng-intl-tel-input/dist/ng-intl-tel-input.min.js' %}"></script>
{#        <script src="{% static 'bower_components/angular-websocket/dist/angular-websocket.min.js' %}"></script>#}
{#        <script src="{% static 'bower_components/reconnecting-websocket/reconnecting-websocket.min.js' %}"></script>#}

        <script src="{% static 'ngapp/app.js' %}"></script>
        <script src="{% static 'ngapp/config.js' %}"></script>
        <script src="{% static 'ngapp/controller.js' %}"></script>
        <script src="{% static 'ngapp/auth/services/auth.service.js' %}"></script>
        <script src="{% static 'ngapp/auth/services/auth.interceptor.js' %}"></script>
        <script src="{% static 'ngapp/user/services/user.session.js' %}"></script>
        <script src="{% static 'ngapp/utils/services/loading.interceptor.js' %}"></script>
        <script src="{% static 'ngapp/utils/services/api.js' %}"></script>
        <script src="{% static 'ngapp/utils/services/alert.service.js' %}"></script>
        <script src="{% static 'ngapp/utils/settings.js' %}"></script>
        <script src="{% static 'ngapp/utils/urls.js' %}"></script>
        <script src="{% static 'ngapp/user/controllers/login.ctrl.js' %}"></script>
        <script src="{% static 'ngapp/home/controllers/home.ctrl.js' %}"></script>

        {# Directives #}
        <script src="{% static 'ngapp/utils/directives/enterSubmit.directive.js' %}"></script>
    {% endblock %}

{#    <div class="section">#}
{#        <div class="container">#}
{#            {% if not user.is_authenticated %}#}
{#                <p>Please log in as an admin in this browser session to enjoy the <mark>CoolChat</mark> app.</p>#}
{#            {% else %}#}
{#                <p><small>Logged in as: </small><big><mark>{{ request.user.username }}</mark></big></p>#}
{#                <p><small>To: </small><big><mark><strong>{% if room %}{{ room.name }}{% else %}{{ receiver.username }}{% endif %}</strong></mark></big></p>#}
{#                <form id="chatform">#}
{#                    <table>#}
{#                        <tbody id="chat">#}
{#                        {% for message in messages %}#}
{#                            <tr>#}
{#                                <td>{% if message.sender.username == request.user.username %}<mark>{{ message.sender }}</mark>{% else %}{{ message.sender }}{% endif %}</td>#}
{#                                <td>{{ message.message }}</td>#}
{#                                <td>{{ message.formatted_timestamp }}</td>#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                        </tbody>#}
{#                        <tfoot>#}
{#                            <tr>#}
{#                                <td>Say something:</td>#}
{#                                <td colspan=2>#}
{#                                    <input id="message" type="text" placeholder="message">#}
{#                                    <button type="submit" id="go">Say it</button>#}
{#                                </td>#}
{#                            </tr>#}
{#                        </tfoot>#}
{#                    </table>#}
{#                </form>#}
{#            {% endif %}#}
{#        </div>#}
{#    </div>#}
</body>
</html>